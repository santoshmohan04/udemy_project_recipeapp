"use strict";(self.webpackChunkUdemy_project=self.webpackChunkUdemy_project||[]).push([[378],{7378:(x,u,i)=>{i.r(u),i.d(u,{AuthModule:()=>S});var d=i(6895),n=i(433),c=i(3599),e=i(1571),h=i(5599),g=i(4978),f=i(2152);function b(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"form",6),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onSubmit(r.authForm))}),e.TgZ(1,"div",7)(2,"label",8),e._uU(3,"Email:"),e.qZA(),e._UZ(4,"input",9),e.qZA(),e.TgZ(5,"div",7)(6,"label",10),e._uU(7,"Password:"),e.qZA(),e._UZ(8,"input",11),e.qZA(),e.TgZ(9,"div",12)(10,"label",13),e._UZ(11,"input",14),e._uU(12," Remember me "),e.qZA()(),e.TgZ(13,"div")(14,"button",15),e._uU(15),e.qZA(),e._uU(16," | "),e.TgZ(17,"button",16),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onSwitchMode())}),e._uU(18),e.qZA()()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.authForm),e.xp6(14),e.Q6J("disabled",!t.authForm.valid),e.xp6(1),e.hij(" ",t.isLoginMode?"Login":"Sign Up"," "),e.xp6(3),e.hij(" Switch to ",t.isLoginMode?"Sign Up":"Login"," ")}}function v(o,a){1&o&&(e.TgZ(0,"div",17),e._UZ(1,"app-loading-spinner"),e.qZA())}let A=(()=>{class o{constructor(t,s,r,l){this.authService=t,this.router=s,this.fb=r,this.alertMsg=l,this.isLoginMode=!0,this.isLoading=!1}ngOnInit(){this.authForm=this.fb.group({email:[null,[n.kI.required,n.kI.email]],password:[null,[n.kI.required,n.kI.minLength(6)]],remember:[!1]});const t=JSON.parse(localStorage.getItem("usrdtl"));null!==t&&this.authForm.patchValue({email:t.useremail,password:t.userpswd,remember:!0})}onSwitchMode(){this.isLoginMode=!this.isLoginMode}onSubmit(t){if(!t.valid)return;const s=t.value.email,r=t.value.password,l=t.value.remember;let m;this.isLoading=!0,m=this.isLoginMode?this.authService.login(s,r):this.authService.signup(s,r),m.subscribe({next:p=>{l?localStorage.setItem("usrdtl",JSON.stringify({useremail:s,userpswd:r})):localStorage.removeItem("usrdtl"),this.isLoading=!1,this.router.navigate(["/recipes"])},error:p=>{this.showErrorAlert(p),this.isLoading=!1}}),t.reset()}showErrorAlert(t){this.alertMsg.alertDanger(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.e),e.Y36(c.F0),e.Y36(n.qu),e.Y36(g.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-auth"]],decls:8,vars:3,consts:[[1,"d-flex","justify-content-center"],[1,"card",2,"width","400px"],[1,"card-header","bg-primary","text-white","text-center"],[1,"card-body"],[3,"ngIf","ngIfElse"],["spinner",""],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter email","name","email",1,"form-control"],["for","pwd",1,"form-label"],["type","password","id","pwd","formControlName","password","placeholder","Enter password","name","pswd",1,"form-control"],[1,"form-check","mb-3"],["for","remember",1,"form-check-label"],["type","checkbox","name","remember","formControlName","remember",1,"form-check-input"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"],[1,"text-center"]],template:function(t,s){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,b,19,4,"ng-template",4),e.YNc(6,v,2,0,"ng-template",null,5,e.W1O),e.qZA()()()),2&t){const r=e.MAs(7);e.xp6(3),e.hij(" ",s.isLoginMode?"Login":"Sign Up"," "),e.xp6(2),e.Q6J("ngIf",!s.isLoading)("ngIfElse",r)}},dependencies:[d.O5,n._Y,n.Fj,n.Wl,n.JJ,n.JL,n.sg,n.u,f.g],encapsulation:2}),o})();var Z=i(4466);let S=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,n.u5,n.UX,c.Bz.forChild([{path:"",component:A}]),Z.m]}),o})()}}]);